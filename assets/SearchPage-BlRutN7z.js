import{c as f,d as h,r as a,j as t,b as p}from"./index-Dt-Sc3JQ.js";import{C as y}from"./Card-LnfrAHfM.js";const N=()=>{const m=f(),u=h(),s=new URLSearchParams(m.search).get("q")||"",[g,i]=a.useState([]),[o,n]=a.useState(1),[r,d]=a.useState(!1),x=async()=>{if(!(!s||r)){d(!0);try{const e=await p.get("/search/multi",{params:{query:s,page:o}});i(l=>[...l,...e.data.results])}catch(e){console.error(e)}finally{d(!1)}}};a.useEffect(()=>{s&&(n(1),i([]))},[s]),a.useEffect(()=>{s&&x()},[o,s]);const c=a.useCallback(()=>{window.innerHeight+window.scrollY>=document.body.offsetHeight-100&&!r&&n(e=>e+1)},[r]);return a.useEffect(()=>(window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)),[c]),t.jsxs("div",{className:"py-16",children:[t.jsx("div",{className:"lg:hidden my-2 mx-1 sticky top-[70px] z-30",children:t.jsx("input",{type:"text",placeholder:"Search here...",onChange:e=>u(`/search?q=${e.target.value}`),value:s,className:"px-4 py-1 text-lg w-full bg-white rounded-full text-neutral-900"})}),t.jsxs("div",{className:"container mx-auto",children:[t.jsx("h2",{className:"capitalize text-lg lg:text-xl font-semibold my-3",children:"Search Results"}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6 mt-4 justify-items-center",children:g.map((e,l)=>t.jsx(y,{data:e,media_type:e.media_type},`${e.media_type}-${e.id}-${l}`))}),r&&t.jsx("p",{className:"text-center mt-4",children:"Loading more results..."})]})]})};export{N as default};
