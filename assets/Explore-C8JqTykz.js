import{G as S,a as L,u as k,r as a,j as s,b as G}from"./index-Dt-Sc3JQ.js";import{C as D}from"./Card-LnfrAHfM.js";function P(l){return S({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z"},child:[]}]})(l)}const z=()=>{const l=L(),c=k(e=>e.movieData.genres),[i,d]=a.useState(1),[m,x]=a.useState([]),[u,w]=a.useState(0),[n,p]=a.useState([]),[j,f]=a.useState(!1),[b,g]=a.useState(!0),o=a.useRef(null),v=()=>f(e=>!e),E=e=>{p(t=>t.includes(e)?t.filter(r=>r!==e):[...t,e])},h=e=>{o.current&&!o.current.contains(e.target)&&f(!1)};a.useEffect(()=>(document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)),[]),a.useEffect(()=>{d(1),x([])},[l.explore,n]),a.useEffect(()=>{(async()=>{try{g(!0);const t=n.join(","),r=await G.get(`/discover/${l.explore}`,{params:{page:i,...t&&{with_genres:t}}});x(C=>[...C,...r.data.results]),w(r.data.total_pages)}catch(t){console.error("Fetch error:",t)}finally{g(!1)}})()},[i,n,l.explore]),a.useEffect(()=>{const e=()=>{window.innerHeight+window.scrollY>=document.body.offsetHeight-10&&d(t=>t<u?t+1:t)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[u]);const N=e=>{p(t=>t.filter(r=>r!==e))},y=()=>s.jsx("div",{className:`w-full h-[360px] rounded-xl\r
   bg-gradient-to-t from-[#3f3b53] to-transparent\r
    animate-pulse`});return s.jsx("div",{className:"py-16 mt-10 mx-4 sm:mx-8 lg:mx-16 xl:mx-20",children:s.jsxs("div",{className:"container mx-auto px-5",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 flex-wrap mb-4",children:[s.jsxs("h3",{className:"capitalize text-lg lg:text-3xl font-semibold my-2 text-amber-50",children:["Explore ",l.explore]}),s.jsxs("div",{ref:o,className:"relative w-full md:w-auto",children:[s.jsxs("div",{onClick:v,className:"border rounded-4xl px-4 py-2 sm:px-6 sm:py-2 cursor-pointer min-w-[200px] sm:min-w-[300px] bg-[#CEC7E9] text-[#1B1927] flex items-center justify-between text-base sm:text-xl",children:["Select Genres",s.jsxs("div",{className:"flex gap-2 sm:gap-3 items-center justify-center ml-2",children:[s.jsx("div",{className:"w-px h-4 sm:h-6 bg-white opacity-50"}),s.jsx(P,{className:"text-lg sm:text-2xl"})]})]}),j&&s.jsx("div",{className:"absolute rounded-xl top-full left-0 mt-1 border  bg-[#CEC7E9] z-50 max-h-[200px] overflow-y-auto w-full min-w-[200px] scrollbar-none",children:c.map(e=>s.jsx("div",{onClick:()=>E(e.id),className:`px-4 py-2 cursor-pointer flex justify-between items-center ${n.includes(e.id)?"bg-[#E6E2F4]":""}`,children:s.jsx("span",{children:e.name})},e.id))})]})]}),n.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:n.map(e=>{const t=c.find(r=>r.id===e);return s.jsxs(s.Fragment,{children:[" hello",s.jsxs("span",{className:"bg-[#CEC7E9]  text-[#1B1927] px-4 py-1.5 rounded-full text-sm flex items-center",children:[t==null?void 0:t.name,s.jsx("button",{onClick:()=>N(e),className:"ml-2 text-xs cursor-pointer",children:"âœ–"})]},e)]})})}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6 mt-4 justify-items-center",children:b&&m.length===0?Array.from({length:10}).map((e,t)=>s.jsx(y,{},`skeleton-${t}`)):m.map((e,t)=>s.jsx(D,{data:e,media_type:l.explore},`${e.id}-${t}-exploreSection`))})]})})};export{z as default};
